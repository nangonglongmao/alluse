### 一、什么是ajax？

- AJAX = 异步 JavaScript 和 XML 
- ajax是一种在无需重新加载整个网页的情况下，能够更新部分网页的技术。 
- ajax是一种用于快速创建动态网页的技术。通过在后台与服务器进行少量数据交换。ajax可以使网页实现异步更新。 

### 二、ajax的优缺点：

- **优点：**

  1、最大的一点是页面无刷新，用户的体验非常好。 　　

  2、使用异步方式与服务器通信，具有更加迅速的响应能力。 　　

  3、可以把以前一些服务器负担的工作转嫁到客户端，利用客户端闲置的能力来处理，减轻服务器和带宽的负担，节约空间和宽带租用成本。并且减轻服务器的负担，ajax的原则是“按需取数据”，可以最大程度的减少冗余请求，和响应对服务器造成的负担。 　　

  4、基于标准化的并被广泛支持的技术，不需要下载插件或者小程序。 　　

  5、ajax可使因特网应用程序更小、更快，更友好。 

- **缺点：**

  1、ajax不支持浏览器back按钮。 　　

  2、安全问题 AJAX暴露了与服务器交互的细节。 　　

  3、对搜索引擎的支持比较弱。 　　

  4、破坏了程序的异常机制。 　　

  5、不容易调试。 

### 三、什么是进程、线程、协程？以及它们的优缺点？

​	进程: 资源分配的最小单位 ，资源消耗大, 系统整体开销大, 数据通信不方便 

​	线程: 程序执行的最小单位，资源消耗小, 可共享数据。上下文开销大。

​		  按时间片强制切换, 不够灵活 。

​	协程: 内存开销更小, 上下文切换开销更小。可根据事件切换, 更加有效的利用 CPU



### 四、什么是HTTP协议？他有哪些特点？

 - 超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。

 - HTTP 协议的主要特点可概括如下：

   1、支持客户 /服务器模式。

   2、.简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用
   的有 GET、HEAD 、POST。每种方法规定了客户与服务器联系的类型不同。由于
   HTTP 协议简单，使得 HTTP 服务器的程序规模小，因而通信速度很快。

   3、灵活： HTTP 允许传输任意类型的数据对象。正在传输的类型由 Content-Type
   加以标记

   4、无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请
   求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。

   5.无状态： HTTP 协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。
   缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次
   连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。

### 五、解释下 Http 请求头和常见响应状态码

**请求头：**

**1、Accept:** 指浏览器或其他客户可以接爱的 MIME 文件格式。可以根据它判断并返回
适当的文件格式。
**2、Accept-Charset ：**指出浏览器可以接受的字符编码。英文浏览器的默认值是
ISO-8859-1. 
**3、Accept-Language ：**指出浏览器可以接受的语言种类，如 en 或 en-us ，指英语。
**4、Accept-Encoding ：**指出浏览器可以接受的编码方式。编码方式不同于文件格式，
它是为了压缩文件并加速文件传递速度。浏览器在接收到 Web 响应之后先解码，
然后再检查文件格式。
**5、Cache-Control ：**设置关于请求被代理服务器存储的相关选项。一般用不到。
**6、Connection ：**用来告诉服务器是否可以维持固定的 HTTP 连接。 HTTP/1.1 使用
Keep-Alive 为默认值，这样，当浏览器需要多个文件时 (比如一个 HTML 文件和相
关的图形文件 )，不需要每次都建立连接。
**7、Content-Type ：**用来表名 request 的内容类型。可以用 HttpServletRequest 的
getContentType() 方法取得。
**8、Cookie ：**浏览器用这个属性向服务器发送 Cookie 。Cookie 是在浏览器中寄存的小
型数据体，它可以记载和服务器相关的用户信息，也可以用来实现会话功能。

**状态码：**

> 状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值:

​	**1xx：**指示信息–表示请求已接收，继续处理
	**2xx：**成功–表示请求已被成功接收、理解、接受
	**3xx：**重定向–要完成请求必须进行更进一步的操作
	**4xx：**客户端错误–请求有语法错误或请求无法实现
	**5xx：**服务器端错误–服务器未能实现合法的请求

> 常见状态代码、状态描述、说明:

| 常见状态码 | 状态描述              | 说明                                              |
| :--------- | :-------------------- | :------------------------------------------------ |
| 200        | OK                    | 客户端请求成功                                    |
| 400        | Bad Request           | 客户端请求有语法错误，不能被服务器所理解          |
| 401        | Unauthorized          | 请求未经授权，这个状态代码必须和 WWW-Authenticate |
| 403        | Forbidden             | 服务器收到请求，但是拒绝提供服务                  |
| 404        | Not Found             | 请求资源不存在， eg：输入了错误的 URL             |
| 500        | Internal Server Error | 服务器发生不可预期的错误                          |
| 503        | Server Unavailable    | 服务器当前不能处理客户端的请求， 一段时间后可能恢 |

### 六、http请求包含哪三个部分？http响应哪三个部分？

**请求：**

1.请求方法URI协议/版本

2.请求头(Request Header)

3.请求正文

**响应：**

1.状态行

2.响应头(Response Header)

3.响应正文

### 七、http的三次握手和四次挥手

*官方解释：*

**三次握手：**

  **第一次握手**：客户端发送了一个带有**SYN(建立连接)**的**Tcp报文**到服务器，这个三次握手中的开始。表示客户端想要和服务端建立连接。  

  **第二次握手**：服务端接收到客户端的请求，返回客户端报文，这个报文带有**SYN(建立连接)**和**ACK(确认)**标志，询问客户端是否准备好。 

  **第三次握手**：.客户端再次响应服务端一个**ACK(确认)**，表示我已经准备好。



**四次挥手：**

**第一次握手**：TCP发送一个**FIN(结束)**，用来关闭客户到服务端的连接。

**第二次握手**：服务端收到这个FIN，他发回一个**ACK(确认)，**确认收到序号为收到序号+1，和SYN一样，一个FIN将占用一个序号。

**第三次握手**：服务端发送一个**FIN(结束)**到客户端，服务端关闭客户端的连接。

**第四次握手**：客户端发送**ACK(确认)**报文确认，并将确认的序号+1，这样关闭完成。

 

*类比解释：*

**三次握手：**

> 用打电话类比的话就是：  
>
> 小明拨打小红的电话  
>
> 小红按下通话键并说了声，喂 （一次握手）  
>
> 小明听到小红的回应，也说了声，喂 （二次握手）  
>
> 小红接收到小明的回应 （三次握手） 



**四次挥手:**

> 还是用小明和小红打电话来类比:
>
> 小明：我这没事儿了，你还有事儿吗？ （1次挥手）  
>
> 小红：我也没事儿了，你确定没事儿了吗？ （2次挥手）  
>
> 小红：我要挂电话了。 （3次挥手）  
>
> 小明：好吧，你挂吧。 （4次挥手） 



### 八、爬虫框架的运行机制

**工作原理:**

![工作原理](E:\千峰培训资料\Python课件\step3\爬虫\day08\day08\工作原理.png)

### 九、Redis的数据类型有哪些？

| 类型                 | 简介                                                   | 特性                                                         | 场景                                                         |
| -------------------- | ------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| String(字符串)       | 二进制安全                                             | 可以包含任何数据,比如jpg图片或者序列化的对象,一个键最大能存储512M | ...                                                          |
| Hash(字典)           | 键值对集合,即编程语言中的Map类型                       | 适合存储对象,并且可以像数据库中update一个属性一样只修改某一项属性值(Memcached中需要取出整个字符串反序列化成对象修改完再序列化存回去) | 存储、读取、修改用户属性                                     |
| List(列表)           | 链表(双向链表)                                         | 增删快,提供了操作某一段元素的API                             | 1,最新消息排行等功能(比如朋友圈的时间线) 2,消息队列          |
| Set(集合)            | 哈希表实现,元素不重复                                  | 1,添加、删除,查找的复杂度都是O(1) 2,为集合提供了求交集、并集、差集等操作 | 1,共同好友 2,利用唯一性,统计访问网站的所有独立ip 3,好用推荐时,根据tag求交集,大于某个阈值就可以推荐 |
| Sorted Set(有序集合) | 将Set中的元素增加一个权重参数score,元素按score有序排列 | 数据插入集合时,已经进行天然排序                              | 1,排行榜 2,带权重的消息队列                                  |

### 十、正则基本规则

- **单个字符：**

```
普通字符：就是一对一的完全匹配
[]：中间的任意一个字符
	[a-z]：表示a到z的任意字符
	[0-9]：表示0到9的任意字符
	[^abc]：除abc之外的字符
. ：匹配'\n'以外的任意字符
\d：所有的数字字符，等价于[0-9]
\D：所有的非数字字符，等价于[^0-9]
\w：所有的数字、字母、中文、下划线等 (就是字的意思)
\W：\w之外的所有字符
\s：所有的空白字符，如：空格、\t、\n、\r
\S：\s之外的所有字符
\b：词边界，如：开头、结尾、标点、空格等
\B：非词边界
```

- **次数控制：**

```
*：前面的字符可以是任意次
+：前面的字符至少出现一次
?：至多一次，0次或1次
{m}：匹配固定的m次
{m,}：至少m次
{m,n}：m到n次
```

- **边界限定:**

> ^：以指定内容开头
>
> $：以指定内容结尾

```python
import re

# 以指定内容开头
# c = re.compile(r'^abc')
# 以指定内容结尾
# c = re.compile(r'abc$')
# 同时限制开头和结尾
c = re.compile(r'^abc$')

s = c.search('abc')

if s:
    print('ok')
    print(s.group())
```

- **分组匹配:**

> |：表示或，具有最低的优先级
>
> ()：用于表示一个整体，可以确定优先级

```python 
import re

# | 表示或，具有最低的优先级
# () 用于表示一个整体，可以确定优先级
c = re.compile(r'a(hello|world)d')

s = c.search('aworldd')

if s:
    print('ok')
    print(s.group())
```

### 十一、MySQL分区

**range分区**：基于属于一个给定连续区间的列值，把多行分配给分区。

**list分区**：类似于按RANGE分区，区别在于LIST分区是基于列值匹配一个离散值集合中的某个值来进行选择。

**hash分区**：基于用户定义的表达式的返回值来进行选择的分区，该表达式使用将要插入到表中的这些行的列值进行计算。这个函数可以包含MySQL 中有效的、产生非负整数值的任何表达式。

**key分区**：类似于按HASH分区，区别在于KEY分区只支持计算一列或多列，且MySQL服务器提供其自身的哈希函数。必须有一列或多列包含整数值。



### 十二、Python优化

> 当我们提到一门编程语言的效率时：通常有两层意思，**第一是开发效率**，这是对程序员而言，完成编码所需要的时间；**另一个是运行效率**，这是对计算机而言，完成计算任务所需要的时间。编码效率和运行效率往往是鱼与熊掌的关系，是很难同时兼顾的。不同的语言会有不同的侧重，python语言毫无疑问更在乎编码效率，life is short，we use python。 

#### Python效率低得原因：

- **第一：python是动态语言** 
- **第二：python是解释执行** 
- **第三：python中一切都是对象** ，每个对象都需要维护引用计数，增加了额外的工作。 
- **第四：python GIL** ，因为GIL，python中的多线程并不能真正的并发 。
- **第五：垃圾回收** ，python采用标记和分代的垃圾回收策略，每次垃圾回收的时候都会中断正在执行的程序（stop the world），造成所谓的顿卡。 



#### Python优化策略：

- ***基于profile的优化：***

**第一：减少函数的调用层次:** 每一层函数调用都会带来不小的开销，特别对于调用频率高，但单次消耗较小的calltree，多层的函数调用开销就很大，这个时候可以考虑将其展开。 

**第二：优化属性查找:**python 的属性查找效率很低，如果在一段代码中频繁访问一个属性（比如for循环），那么可以考虑用局部变量代替对象的属性。 

**第三：关闭GC:** 

**第四：setcheckinterval:** 如果程序确定是单线程，那么修改checkinterval为一个更大的值 。

**第五：使用`__slots__ `:** slots最主要的目的是用来节省内存，但是也能一定程度上提高性能。 

- ***python C扩展：*** 

> C扩展就是把部分python代码用C或者C++重新实现，然后编译成动态链接库，提供接口给其它python代码调用。大约比Python快10倍左右。

**第一：注意引用计数的正确管理** 

**第二：C扩展与多线程** 

**第三：C扩展应用场景：**仅适合与业务代码的关系不那么紧密的逻辑，如果一段代码大量业务相关的对象 属性的话，是很难C扩展的 

- ***beyond CPython：***

  * **cython**

  > Cython的主要目的是加速python的运行效率，但是又不像上一章节提到的C扩展那么复杂。 
  >
  > Cython是python语言的超集，增加了对C语言函数调用和类型声明的支持。从这个角度来看，cython将动态的python代码转换成静态编译的C代码，这也是cython高效的原因。 

  * **pypy**

  > pypy大概比cpython要快3到5倍！ pypy占用的内存更少，而且支持stackless，基本等同于协程。 
  >
  > pypy的缺点在于对C扩展方面支持的不太好，需要使用CFFi来做binding。对于使用广泛的library来说，一般都会支持pypy，但是小众的、或者自行开发的C扩展就需要重新封装了。 

